# 핀패스 확장 플로우 v2 최적화 문서

## 1. 문서 목적
- 기존 3개 페이지(`Result`, `LiveSimulation`, `FinalAnalysis`)를 유지하면서 4~7단계 경험을 자연스럽게 확장한다.
- 구현팀이 바로 개발 가능한 수준으로 화면 책임, 입력/출력 데이터, 수용 기준을 명확히 정의한다.
- 모든 사용자 카피는 동기부여 중심으로 유지한다.

## 2. 전체 사용자 여정
1. 가치발견
2. 비전보드
3. 현실입력
4. 가능성 탐색
5. What If 조정
6. 맞춤 재무 로드맵
7. 주기 점검 동의

## 3. 단계별 정의 (입력/출력/핵심 UI)
| 단계 | 핵심 목표 | 입력 데이터 | 출력 데이터 | 핵심 UI |
|---|---|---|---|---|
| 4 가능성 탐색 | 현재 페이스를 긍정적으로 해석하고 다음 행동 동기 부여 | `planInputs`, `answers` | `possibilitySnapshot` | 저축 성향 지표, 상위 퍼센타일, AI 제안 박스 |
| 5 What If 조정 | 사용자가 변수 조정으로 결과 변화를 즉시 체감 | `planInputs`, `possibilitySnapshot` | `whatIfAdjustments`, `simulationSnapshot` | 전문가 카드, 지출 슬라이더, 즉시 반영 수치 |
| 6 맞춤 로드맵 | 5개년 목표와 실행 방향을 요약하고 공유 가능하게 제공 | `simulationSnapshot`, `answers` | `roadmap5Y`, `visionCard` | My Roadmap 카드, 연차 인디케이터, 비전 카드 공유 버튼 |
| 7 점검 동의 | 주기 점검을 위한 이메일 동의 확보 | `email`, `cycleMonths` | `checkupConsent` | 페이스메이커 메시지, 이메일 입력, 동의 CTA |

## 4. 이미지 기반 반영 명세 (4~7단계)

### 4.1 단계 4: 가능성 탐색 (Image #1)
- 헤드라인: `{이름} 님, 이미 잘하고 계십니다!`
- 본문 포맷:
  - `현재 저축 성향은 {xx.x}%로, 상위 {yy}%의 탄탄한 저축력입니다.`
  - `지금 페이스라면 5년 뒤 순자산은 약 {N}억 원 이상 증가할 가능성이 매우 높습니다.`
- 강조 박스:
  - 라벨: `AI 제안`
  - 규칙: 비판 금지, 1개 실행 제안 포함

### 4.2 단계 5: What If 조정 (Image #2)
- 전문가 카드:
  - 직함: `전략적 가이드`
  - 이름: `카테고리 담당 가이드`
  - 코멘트: 현재 조정안의 효과를 1문장 요약
- 담당 가이드 정책:
  - 카테고리별 담당 가이드를 노출(에이전트 한/송/최/유)
  - 별도 플래너/AI 전용 카드는 노출하지 않음
- 조정 항목 기본값:
  - `커피 값 아끼기`
  - `배달비 아끼기`
  - `구독비 줄이기`
- 상호작용:
  - 슬라이더 조정 시 `월 저축액`, `달성 시점`, `5년 자산` 동시 업데이트
  - 우측 수치 표기: `+0만원`, `+3만원` 형태
  - 슬라이더 변경 때마다 `담당 가이드 멘트`가 동적으로 변경

### 4.3 단계 6: 맞춤 재무 로드맵 (Image #3, #4)
- Roadmap 영역:
  - 타이틀: `My Roadmap`
  - 카드: `미래 자산 등고선` 시각화 + `5년 뒤 자산 고지 {N}억`
  - 인디케이터: 1~5년 점/막대 + 단계별 자산/증가액 리스트
- 비전 카드 영역:
  - 이름 + 달성률 배지(예: `달성률 80% 근접`)
  - 응원 문장 1줄
  - CTA: `비전 카드 공유하기`
- 공유 채널: 카카오톡, 링크 복사, 이미지 저장

### 4.3.1 비전보드 항로 설명 규칙
- `목표 자산 항로`는 반드시 아래 3개 라벨을 표시한다.
  - `현재`
  - `중간`
  - `목표`
- 각 라벨에는 금액 또는 단계 수치를 함께 노출한다.
- 항로 하단에는 "초안 수치이며 현실 입력 단계에서 보정" 안내를 표시한다.

### 4.4 단계 7: 주기 점검 동의 (Image #5)
- 헤드라인: `페이스메이커가 되어드릴게요.`
- 본문: `{n}개월마다 동반 경로 점검 + 이메일 안내`
- 입력/CTA:
  - 이메일 1필드
  - 버튼: `점검 동의 및 동반 시작`
- 선택 보상:
  - `전문가 1:1 채팅권` 문구 노출 가능

## 5. 기존 페이지별 개편 책임

### 5.1 `finpass-web/src/pages/Result.tsx`
- 역할: 현실입력 허브
- 추가:
  - 비전보드 요약 블록
  - CTA 문구 `가능성 탐색 시작`
- 다음 페이지 전달:
  - `answers`, `categoryId`, `planInputs`, `visionBoardSummary`

### 5.2 `finpass-web/src/pages/LiveSimulation.tsx`
- 역할: 단계 4+5 통합 화면
- 추가:
  - 저축 성향 진단 블록
  - 담당 가이드 카드(카테고리별)
  - 슬라이더 조정 값 즉시 반영
  - 슬라이더별/조정폭별 담당 가이드 멘트 실시간 변경
- 다음 페이지 전달:
  - `simulationSnapshot`, `whatIfAdjustments`, `expertAdviceLog`

### 5.3 `finpass-web/src/pages/FinalAnalysis.tsx`
- 역할: 단계 6 요약 + 단계 7 진입
- 추가:
  - My Roadmap(5개년) + 미래 자산 등고선
  - 비전 카드 공유 CTA
  - 점검 동의 페이지 이동 CTA
- 다음 페이지 전달:
  - `roadmap5Y`, `visionCard`, `checkupDraft`

## 6. 신규 페이지와 라우팅
- 신규 페이지:
  - `/value-discovery`
  - `/vision-board`
  - `/checkup-consent`
  - `/consult-chat` (선택)
- 라우트 흐름:
  - `/wizard` -> `/value-discovery` -> `/vision-board` -> `/result` -> `/simulation` -> `/final-analysis` -> `/checkup-consent`

## 6.1 온보딩 입력 자동 반영 규칙
- `ValueDiscovery`의 `핵심 목표`, `지키고 싶은 가치`는 사용자의 기존 입력값(질문 단계 포함)에서 기본 선택 상태로 자동 세팅한다.
- 매핑 우선순위:
  - 목표: `l1` > 카테고리 특화 답변(`r1`, `i1`, `s5`) > 카테고리 기본값
  - 가치: `c3` > `l4` > 기본값(`균형`)
- 사용자는 자동 반영된 값을 수정 가능해야 한다.

## 7. 타입 계약(초안)
```ts
type PossibilitySnapshot = {
  savingsScore: number; // 0~100
  peerPercentile: number; // 상위 xx%
  projected5yAsset: number;
  aiSuggestion: string;
};

type WhatIfAdjustments = {
  coffeeDelta: number;
  deliveryDelta: number;
  subscriptionDelta: number;
  monthlySavingDelta: number;
};

type Roadmap5Y = {
  title: string;
  projectedAsset5Y: number;
  yearlyMilestones: Array<{ year: number; asset: number; note: string }>;
};

type VisionCard = {
  userName: string;
  achievementRate: number;
  encouragement: string;
  imageUrl?: string;
};

type CheckupConsent = {
  agreed: boolean;
  cycleMonths: 3 | 6 | 12;
  email: string;
  rewardAccepted?: boolean;
};
```

## 8. 카피 톤 정책
- 금지:
  - 압박형 문장
  - 비난형 문장
  - 공포형 문장
- 필수:
  - 실행 가능성 강조
  - 작은 변화의 누적 효과 강조
  - 이미 잘한 부분 먼저 인정
- 권장 문장 패턴:
  - `지금 페이스도 충분히 좋아. 여기서 한 단계만 조정하면 더 빨라질 수 있어.`
- 서비스 문체:
  - 사용자 노출 카피는 기본적으로 존댓말로 통일한다.

## 8.1 결과 페이지 UI 톤(레퍼런스 반영)
- 대상 화면:
  - `Result`
  - `LiveSimulation`
  - `FinalAnalysis`
- 색감:
  - 배경: 밝은 회색/블루그레이 그라데이션 (`#f4f6f9` 계열)
  - 주요 CTA: 딥 네이비 (`#1e2f49`)
  - 카드: 화이트 + 연한 보더 (`#dbe2ec`)
- 버튼:
  - 기본 radius: 22px (pill 형태 금지)
  - 선택 상태: 진한 네이비 배경 + 두꺼운 보더
  - 보조 버튼: 화이트 배경 + 연한 회색 보더

## 9. 수용 기준(Definition of Done)
- 4~7단계가 화면과 데이터 흐름에서 단절 없이 연결된다.
- 슬라이더 조정 시 핵심 수치가 1초 내 갱신된다.
- 비전 카드 공유 버튼이 최소 1개 채널에서 동작한다.
- 점검 동의 시 이메일/주기 데이터가 저장된다.
- 모든 안내 문구가 동기부여 톤 검수 기준을 통과한다.

## 10. 구현 우선순위
1. 라우트 추가 + 신규 페이지 뼈대 생성
2. `Result.tsx` 비전요약/CTA 반영
3. `LiveSimulation.tsx` 단계 4/5 통합 반영
4. `FinalAnalysis.tsx` 단계 6 반영 + 단계 7 진입
5. `/checkup-consent` 저장 로직 연결
6. 공유 기능(카카오/링크/이미지 저장) 최소 1개 우선 적용

## 11. 리스크와 대응
- 리스크: 카카오 공유 SDK 연동 지연
- 대응: 1차는 링크 복사/이미지 저장 우선, 카카오 공유는 2차 배포
- 리스크: 수치 계산 복잡도 증가
- 대응: 기존 시뮬레이션 훅 재사용 + 입력 검증(Zod) 적용

## 12. 참고
- 본 문서는 사용자 제공 시안 이미지(Image #1~#5)를 우선 기준으로 최적화했다.
- Gemini 공유 링크(`https://gemini.google.com/share/914c8636fee1`) 원문은 현재 환경에서 직접 확인하지 못했다.
